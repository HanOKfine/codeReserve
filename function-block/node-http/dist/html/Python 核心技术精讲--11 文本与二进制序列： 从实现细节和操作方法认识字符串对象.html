<!doctype html>
<html lang="zh_CN">

    

    

    
    
    
    <head>
        
        <title>11 文本与二进制序列： 从实现细节和操作方法认识字符串对象</title>
        
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="揭开被“简单易学”掩盖的Python真相">
        <meta name="keywords" content="慕课网">
        <meta name="author" content="">
        <meta name = "format-detection" content="telephone=no">
        <meta http-equiv="Cache-Control" content="no-transform " />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <link rel="shortcut icon" href="https://m.imooc.com/static/wap/static/favicon.ico" />
        
        
        
        <script type="text/javascript" src="https://m.imooc.com/static/wap/static/common/js/flexible.js"></script>
        
        <script type="text/javascript">
            var userInfo = "";
            
                var isApp = 0;
            
        </script>
         
<!-- 专栏首页列表模板 -->
<script type="text/template" id="index-list-tpl">
<ul class="list-con">
    {@each data.data as item}
        <li>
            <a href="/read/${item.id}" class="item clearfix">
                <div class="img l" style="background-image: url(${item.app_pic1})">
                    {@if item.is_new }
                        <div class="icon new">
                            上新
                        </div>
                    {@else if item.is_marking} 
                        <div class="icon">
                            经典
                        </div>
                    {@/if} 
                </div>
                <div class="text-con l">
                    <div class="title">
                        ${item.title}
                    </div>
                    <div class="desc">
                        ${item.chapter_num}节 · ${item.description}
                    </div>
                     <div class="user-info">
                        ${item.nickname}
                        {@if item.author_title }
                        <span class="dot">
                            ·
                        </span>
                        ${item.author_title}
                        {@/if}
                    </div>
                    <div class="info clearfix">
                    {@if !item.isBuy } 
                        <!-- 未购买才显示 -->
                        <div class="price-con l">
                        {@if item.open_discount == "1" }
                            <span class="now">￥${item.pay_price}</span>
                            <span class="ori">￥${item.price}</span>
                            <p class="sale">${item.discount_name}</p>
                        {@else}
                            <span class="now">￥${item.price}</span>
                        {@/if}
                        </div>
                    {@/if}
                        <div class="taste-con r">
                            <span>${item.numbers}人订阅</span>
                            {@if !item.isBuy }
                                <span class="gotaste">试读</span>
                            {@else}
                                <span class="gotaste">学习</span>
                            {@/if}
                        </div>
                    </div>
                </div>
            </a>
        </li>
    {@/each}
</ul>
</script>



<!-- 专栏目录 买后目录页、 -->
<script type="text/template" id="detail-catalog-tpl">
<ul class="catalog-list">
{@each data.list as item}
    <li class="zhang">
        {@if data.structure_mode == "1" }
            <!--章节模式-->
            <div class="zhang-title">
                ${item.title}（${item.count}节）
            </div>
            <div class="zhang-sub-title">
                ${item.short_introduce}
            </div>
        {@/if}  
        <ul class="zhang-detail">
            {@each item.list as it,i}
                <li class="jie">
                    {@if data.isLogin }
                        <!-- 购买了  -->
                        {@if data.isBuy }
                        <a href="javascript:;" data-link="/read/${data.column_id}/article/${it.id}" class="js-go-read">
                        {@else}
                        <a href="javascript:;" data-link="/read/${data.column_id}/article/${it.id}" class="js-go-read" >
                        {@/if}
                    {@else}
                        <!-- 未登录  -->
                        {@if data.isApp }
                            <a href="javascript:;" onclick="window.nativeSupport.login();">
                        {@else}
                            <a href="//m.imooc.com/account/login?backurl=/read/${data.column_id}">
                        {@/if}
                    {@/if}
                        <div class="jie-con {@if data.last_chapter == it.id }recent{@/if}">
                            
                            <div class="text-con">
                                <div class="jie-title">
                                    ${it.title}
                                </div>
                                <div class="jie-status">
                                    {@if it.is_open == "0" }
                                        <span class="update-time" >${it.open_time_fmt}</span>
                                    {@/if}
                                    {@if it.view_num > 100 }
                                    <div class="learn-num">
                                        <i class="imwap-set-sns"></i>
                                        <span>${it.view_num}</span>
                                    </div>
                                    {@/if}
                                    {@if it.in_24hours == "1" }
                                        <span class="update-recent">最近更新</span>
                                    {@/if}
                                </div>
                            </div>
                        </div>
                        {@if it.is_learned }
                            <div class="jie-right haslearn is_learned js-learn" data-type="1">
                                已学
                            </div>
                        {@else}
                            <!-- 购买了  -->
                            {@if data.isBuy }
                                <div class="jie-right learn js-learn" data-type="1">
                                    学习
                                </div>
                            {@else}
                                {@if it.is_pay == "0" }
                                <!--免费小节 不占用试读次数  -->
                                    <div class="jie-right learn js-learn" data-type="1">
                                        免费
                                    </div>
                                {@else}
                                    <div class="jie-right learn js-learn" data-type="0">
                                        学习
                                    </div>
                                {@/if}
                            {@/if}
                            
                            
                        {@/if}
                    </a>
                </li>
            {@/each}
        </ul>
    </li>
{@/each}
</ul>
</script> 

<!-- 阅读页 阅读页   专栏目录  -->
<script type="text/template" id="catalog-tpl">
<div>
    <h2 class="article-title">${data.a_name}</h2>
    <ul class="catalog">
    {@each data.list as item}
        <li class="zhang">
            {@if data.structure_mode == "1" }
                <!--章节模式-->
                <div class="zhang-title">
                    ${item.title}
                    <!-- <div class="num">共${item.count}节</div> -->
                </div>
            {@/if}  
            <ul class="zhang-detail">
                {@each item.list as it,i}
                    <li class="jie">
                        <!--买了且开放的-->
                        <a href="/read/${data.column_id}/article/${it.id}">
                            <div class="jie-title clearfix full">
                                <p>
                                    {@if data.last_chapter == it.id }
                                        <span class="recent">最近阅读</span>
                                    {@/if}
                                    ${it.title}
                                </p>
                            </div>
                        </a>
                    </li>
                {@/each}
            </ul>
        </li>
    {@/each}
    </ul>
</div>
</script>





<script type="text/javascript">
	var isApp = "";
	var clientVersion = "0";
	var count_num = "1";
	var chapter_id = "2214";
	var chapter_title = "11 文本与二进制序列： 从实现细节和操作方法认识字符串对象";
	var aid = "79";
	var a_name = "Python 核心技术精讲";
	var a_price = "78.00";
	var a_pic = "https://img4.mukewang.com/5ee98cca00018e2a05400720.jpg";
	var userId = 0;

	var column_id = '79';
	var isLogin = 0;
	

</script>
<!-- 引入字体 -->
<script type="text/javascript" src="//cdn.webfont.youziku.com/wwwroot/js/wf/youziku.api.min.js"></script>
<script type="text/javascript">
$youziku.load(".top-con .title, .cl-preview-section h1,.cl-preview-section h2,.cl-preview-section h3,.cl-preview-section h4,.cl-preview-section h5,.cl-preview-section h6", "37af461390fa4d138f5c3d277f7286dc", "SourceHanSerifSC-Heavy"); // 思源宋体heavy
$youziku.load(".lead-motto, .cl-preview-section blockquote", "d9a0d855583142c3b2cc3bf1646a8473", "SourceHanSerifSC-Regular"); // 思源宋体regular
$youziku.load("#article_content, .cl-preview-section pre, .cl-preview-section code, #code-copy", "3d84aabcf9e44b6f8c6fa91c61fa926e", "HYQiHei-55S"); // 汉仪旗黑55s
$youziku.load(".cl-preview-section strong", "fd94fff3a17546a28913a79613bddcec", "HYQiHei-77S"); // 汉仪旗黑70s

$youziku.draw();
</script>

<style type="text/css">
  header{
    display: none!important;
  }
  
  #wrapper{
  	padding-top:0px !important;
  }
  
</style>



    <link rel="stylesheet" href="https://m.imooc.com/static/wap/static/common/css/common_d42b1ef.css" /><link rel="stylesheet" href="https://m.imooc.com/static/wap/static/css/read/7.2.8/article_2d28313.css" /></head>
    <body >
        
          
        

        
          
        

        
          







<header class="directory2">
	<div class="header clearfix">
		
			
				<div class="page-title clearfix">
					<a href="//m.imooc.com" class="imwap-icon-imooc"></a>
					<div class="page-title-name js-page-name">
						<span>专栏</span>
						<i class="imwap-arrow_d"></i>
					</div>
				</div>
			

			
			<div class="drawer-box js-drawer-more">
				<i class="imwap-more_vert"></i>
				<div class="drawer-content js-drawer-content">
					<p class="line-row"></p>
					<a class="drawer-item" href="//m.imooc.com"><i class="imwap-center"></i>回到首页</a>
					<a class="drawer-item" href="//www.imooc.com/m/web/user/usercenter.html"><i class="imwap-peaple"></i>个人中心</a>
					<a class="drawer-item" href="//m.imooc.com/feedback"><i class="imwap-comment"></i>反馈问题</a>
					
					<a class="drawer-item" href="//m.imooc.com/account/login"><i class="imwap-out"></i>注册登录</a>
					
				</div>
			</div>
			

			
				<a id="js-appload" href="Javascript:;" class="app-load"><span>下载APP</span></a>
			

		
	</div>
	
	<div class="page-tab-wrap">
		<div class="page-tab-list">
			<a href="//m.imooc.com" class="page-tab-item">首页</a>
			<a href="//m.imooc.com/course/list" class="page-tab-item">课程</a>
			<a href="//coding.m.imooc.com" class="page-tab-item">实战</a>
			<a href="//class.m.imooc.com" class="page-tab-item">金职位</a>
			<a href="//m.imooc.com/article" class="page-tab-item">手记</a>
			<a href="//m.imooc.com/read" class="page-tab-item active">专栏</a>
			<a href="//m.imooc.com/wenda" class="page-tab-item">猿问</a>
			<a href="//m.imooc.com/wiki" class="page-tab-item">慕课教程</a>
			
		</div>
	</div>
	
</header>


        

        <div id="wrapper">
            <div id="middle" class="container ">

                

                
	
		
	
	<div class="top-con">
		<p class="update-time"><span>2020-07-15&nbsp;&nbsp;&nbsp;更新</span></p>
		<div class="title">
			11 文本与二进制序列： 从实现细节和操作方法认识字符串对象
		</div>
	</div>
	
		<div class="article-img" style="background-image: url('https://img3.mukewang.com/5f0e5f7e0001653606400426.jpg')"></div>
	
	
		<a href="/read/79">
			<div class="course-entry">
				<img src="https://img.mukewang.com/5edcf963000148bc05200501-40-40.jpg" alt="郭元锴">
				<h3>Python 核心技术精讲</h3>
				<p>郭元锴 · BAT高级研发工程师</p>
				<i class="imwap-arrow_r"></i>
			</div>
		</a>
	
	
		<div class="lead-motto">
			<div class="content">先相信你自己，然后别人才会相信你。<p class="author">——屠格涅夫</p></div>
		</div>
	
	
		<div class="content" id="article_content">
			
			<div class="cl-preview-section"><h2 id="引言">引言</h2>
</div><div class="cl-preview-section"><p>在日常的开发中，我们需要经常和文本字符串打交道，比如用户输入的处理，文本的解析与提取、格式化等。在特定的专业领域，我们可能还需要对图像、音频等二进制数据、网络编程中打包的二进制数据等进行处理。除此之外，我们还会或多或少的接触到 Unicode 编码的相关知识。在本小节，我们旨在从一线开发的角度，结合概念、原理、应用，进一步认识和了解 Python 中字符串的重点内容与技巧。</p>
</div><div class="cl-preview-section"><h2 id="unicode-和-str、bytes">Unicode 和 str、bytes</h2>
</div><div class="cl-preview-section"><h3 id="unicode-和-utf-8">Unicode 和 UTF-8</h3>
</div><div class="cl-preview-section"><p>我们把 Unicode 和编解码的主要概念在这一部分的最开始简要说明：</p>
</div><div class="cl-preview-section"><p>不同的字符要在计算机硬件中表示，需要转换为二进制值，二进制值和字符之间通过字符集进行映射，有多种字符集，包括 ASCII 字符集、Unicode 字符集等。</p>
</div><div class="cl-preview-section"><p>如果你编写仅包含英文字符的程序，ASCII 通常是够用的，它定义了共 128 个字符，其中一个字符对应一个字节，比如 <code>A</code> 对应 <code>01000001</code>（十进制中的 65）。</p>
</div><div class="cl-preview-section"><p>但当你在编码中需要使用诸如中文等非英文字符时，通常这些语言中所包含的字符数量远多于英文字符的数量，若每一个字符都只使用一个字节进行表示的话，显然是不足以表示这么多字符的，比如下面的例子所展示的那样。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'ascii'</span><span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;stdin&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
UnicodeEncodeError<span class="token punctuation">:</span> <span class="token string">'ascii'</span> codec can<span class="token string">'t encode character '</span>\u4f60' <span class="token keyword">in</span> position <span class="token number">0</span><span class="token punctuation">:</span> ordinal <span class="token operator">not</span> <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="cl-preview-section"><p>这时便需要 Unicode 字符集，Unicode 字符集涵盖的字符数量远大于一个 8 位的字节所能表示的字符数量。可以从下面的示例中看到，在 Unicode 中，“你”对应的整数（准确的说，是代表汉字“你”的 Unicode 码点值）为 20320，对应的十六进制为 4F60。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'你'</span><span class="token punctuation">)</span>
<span class="token number">20320</span>
</code></pre>
</div><div class="cl-preview-section"><p>那我们常用的 UTF-8 和 Unicode 之间的关系是什么呢？UTF-8 是针对 Unicode 字符集的一种转换格式， 即将 Unicode 码点转换为字节的方式。UTF-8 采用可变长字节数的方案来进行转换，一个码点对应 1 至 4 个字节，具体的编码规则如下所示，可以看出我们上面的 4F60，在 00000800-0000FFFF 之间，对应三个字节。</p>
</div><div class="cl-preview-section"><div class="table-wrapper"><table>
<thead>
<tr>
<th>Unicode 十六进制码点范围</th>
<th>UTF-8 二进制字节</th>
</tr>
</thead>
<tbody>
<tr>
<td>00000000-0000007F</td>
<td>0xxxxxxx</td>
</tr>
<tr>
<td>00000080-000007FF</td>
<td>110xxxxx 10xxxxxx</td>
</tr>
<tr>
<td>00000800-0000FFFF</td>
<td>1110xxxx 10xxxxxx 10xxxxxx</td>
</tr>
<tr>
<td>00010000-0010FFFF</td>
<td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
</tr>
</tbody>
</table>
</div></div><div class="cl-preview-section"><p>那么 4F60 怎样对应到上面 UTF-8 编码中的三个字节呢？需要将 4F60 对应的二进制数 100111101100000 从右向左依次填入表格中省略的 x 处（未填满的 x 处用 0 补足）：</p>
</div><div class="cl-preview-section"><p>​								1110xxxx 10xxxxxx 10xxxxxx -&gt; 11100100 10111101 10100000</p>
</div><div class="cl-preview-section"><p>上面得到的结果对应的十六进制便是 E4BDA0，即是 4F60 对应的 UTF-8 编码。我们通过下面的 Python 代码进一步加深理解。在理解了上述从码点值到 UTF-8 编码的转换过程后，我们便可以理解下面示例中 <code>b'\xe4\xbd\xa0'</code> 这个输出的基本逻辑了。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token number">20320</span><span class="token punctuation">)</span>
<span class="token string">'0b100111101100000'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token number">0b11100100</span><span class="token punctuation">)</span>
<span class="token string">'0xe4'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token number">0b10111101</span><span class="token punctuation">)</span>
<span class="token string">'0xbd'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token number">0b10100000</span><span class="token punctuation">)</span>
<span class="token string">'0xa0'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>  <span class="token comment"># '\xe4' 为十六进制 e4 的转义 </span>
b<span class="token string">'\xe4\xbd\xa0'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token string">'你'</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token string">'你'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">3</span>
</code></pre>
</div><div class="cl-preview-section"><p>另外，Unicode 字符集转换格式除了 UTF-8 以外，还有 UTF-16、UTF-32。</p>
</div><div class="cl-preview-section"><p>最后，基于上面的内容，不难理解编解码的基本概念，编码是指将字符串按照某个编码方案转换为对应的字节；解码则是指根据某个编码方案将字节转换为对应的字符串。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b<span class="token string">'\xe4\xbd\xa0'</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
<span class="token string">'你'</span>
</code></pre>
</div><div class="cl-preview-section"><h3 id="一个简单的分类">一个简单的分类</h3>
</div><div class="cl-preview-section"><p>接下来，我们对 Python 中字符串类型的发展变化过程进行一个简单的梳理，在 Python 2.X 中：</p>
</div><div class="cl-preview-section"><ul>
<li><code>str</code> 用于表示两种类型的数据，分别为（可用一个 8 位字节表示的）文本字符串，以及字节串（二进制数据）。</li>
<li><code>unicode</code> 用于表示 Unicode 文本字符串。</li>
</ul>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># Python 2.X</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'hello'</span>
<span class="token string">'hello'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你好'</span>
<span class="token string">'\xe4\xbd\xa0\xe5\xa5\xbd'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> u<span class="token string">'你好'</span>
u<span class="token string">'\u4f60\u597d'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">type</span><span class="token punctuation">(</span>u<span class="token string">'你好'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token builtin">type</span> <span class="token string">'unicode'</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token builtin">type</span> <span class="token string">'str'</span><span class="token operator">&gt;</span>
</code></pre>
</div><div class="cl-preview-section"><p>在 Python 3.X 中：</p>
</div><div class="cl-preview-section"><ul>
<li><code>str</code> 用于表示文本字符串，将 Python 2.X 中 “割裂” 的（可用一个 8 位字节表示的）文本字符串和 Unicode 文本字符串进行了合并；</li>
<li><code>bytes</code> 用于表示字节串，并增加了 <code>bytearray</code> 作为可变的 <code>bytes</code> 。</li>
</ul>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'hello'</span>
<span class="token string">'hello'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你好'</span>
<span class="token string">'你好'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'str'</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b<span class="token string">'hello'</span>
b<span class="token string">'hello'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">type</span><span class="token punctuation">(</span>b<span class="token string">'hello'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'bytes'</span><span class="token operator">&gt;</span>
</code></pre>
</div><div class="cl-preview-section"><h3 id="不可变序列">不可变序列</h3>
</div><div class="cl-preview-section"><p>在上一节类型层级的划分中，我们提到字符串类型是一种不可变序列。首先，Python 中的字符串是一种序列类型，因此它支持常见的序列操作，比如索引、切片、<code>len()</code> 等。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'hello world!'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token string">'h'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span>
<span class="token string">'lo '</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token string">'el o'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># 反转字符串</span>
<span class="token string">'!dlrow olleh'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token number">12</span>
</code></pre>
</div><div class="cl-preview-section"><p>其次，不可变是指对象在创建之后具有固定值，不能对其进行原位置改变。比如不能通过赋值改变字符串某一索引处的值。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'H'</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;input&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> <span class="token string">'str'</span> <span class="token builtin">object</span> does <span class="token operator">not</span> support item assignment
</code></pre>
</div><div class="cl-preview-section"><p>在这里需要注意的是，对于包含其他对象引用的不可变的复合对象来说，其包含的对象引用集是不可变的，但并不代表所包含的对象不能被改变。比如下面所示的元组中包含可变对象，该可变对象仍是可以改变的：</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;input&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> <span class="token string">'tuple'</span> <span class="token builtin">object</span> does <span class="token operator">not</span> support item assignment
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">(</span><span class="token string">'hello world!'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre>
</div><div class="cl-preview-section"><h3 id="str、bytes、bytearray">str、bytes、bytearray</h3>
</div><div class="cl-preview-section"><h4 id="常用的基本技巧">常用的基本技巧</h4>
</div><div class="cl-preview-section"><p>在这一部分，我们对需要注意的一些知识点分别进行讨论。</p>
</div><div class="cl-preview-section"><p>Python 中并没有单字符的 <code>char</code> 类型，可以使用只包含单独字符的字符串，这也表示对字符串进行索引后得到的也是一个字符串。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'hello world!'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token string">'h'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token string">'h'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token boolean">True</span>

</code></pre>
</div><div class="cl-preview-section"><p>字符串可以被单引号、双引号或者三重引号包裹，可以使用单双引号互相包裹来代替反斜杠转义。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'hello \'world\''</span>
<span class="token string">"hello 'world'"</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">"hello 'world'"</span>
<span class="token string">"hello 'world'"</span>

</code></pre>
</div><div class="cl-preview-section"><p>可以使用原始字符串 <code>r''</code> 来避免转义，这常用于正则表达式、Windows 下的目录路径编写等场合。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token string">'D:\test.txt'</span><span class="token punctuation">)</span>
D<span class="token punctuation">:</span>\test<span class="token punctuation">.</span>txt
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'D:\test.txt'</span><span class="token punctuation">)</span>
D<span class="token punctuation">:</span>	est<span class="token punctuation">.</span>txt

</code></pre>
</div><div class="cl-preview-section"><p>表达式中的字符串之间若无逗号隔开，Python 会隐式的将其进行拼接。将这种形式放置在圆括号中进行折行可以避免某个表达式过长而超过 PEP8 的要求。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'hello'</span>  <span class="token string">' world!'</span>
<span class="token string">'hello world!'</span>

</code></pre>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python">s <span class="token operator">=</span> <span class="token string">"This is a very, very, very, very, "</span> \
    <span class="token string">"very, very, very long sentence"</span>
s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"This is a very, very, very, very, "</span>
     <span class="token string">"very, very, very long sentence"</span><span class="token punctuation">)</span>

</code></pre>
</div><div class="cl-preview-section"><h4 id="字节串-bytes">字节串 bytes</h4>
</div><div class="cl-preview-section"><p><code>bytes</code> 是由若干个 8 位字节组成的不可变序列，其中每个字节由 [0, 255] 之间的整数表示。<code>bytes</code> 支持除字符串格式化外的大多数 <code>str</code> 对象具有的方法。如下所示，当字节串或者字节串切片被打印时，其会被显示为字符串。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> b<span class="token string">'hello world!'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
b<span class="token string">'hello world!'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>
b<span class="token string">'hello'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token string">'H'</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;input&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> <span class="token string">'bytes'</span> <span class="token builtin">object</span> does <span class="token operator">not</span> support item assignment

</code></pre>
</div><div class="cl-preview-section"><p>当 <code>bytes</code> 进行索引操作或者使用 <code>list()</code> 时，会显示对应的二进制整数或者二进制整数组成的序列。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token number">108</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">119</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">]</span>

</code></pre>
</div><div class="cl-preview-section"><p>创建 <code>bytes</code> 可以通过 <code>b''</code> 这种字面量方式，也可以通过内置函数 <code>bytes()</code> 来创建。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">bytes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
b<span class="token string">'hello'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">bytes</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'ascii'</span><span class="token punctuation">)</span>
b<span class="token string">'hello'</span>

</code></pre>
</div><div class="cl-preview-section"><h4 id="可变字节串-bytearray">可变字节串 bytearray</h4>
</div><div class="cl-preview-section"><p>Python 3.X 在 <code>str</code> 和 <code>bytes</code> 之外还增加了 <code>bytearray</code> 类型，<code>bytearray</code> 是 <code>bytes</code> 可变形式，同时 <code>bytearray</code> 也被向后移植到了 Python 2.6 及之后的 Python 2.X 版本中。除支持可变（可原地修改）外，<code>bytearray</code> 和 <code>bytes</code> 的接口和功能也是一致的。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># Python 2.X</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'hello world!'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token builtin">bytearray</span><span class="token punctuation">(</span>b<span class="token string">'hello world!'</span><span class="token punctuation">)</span>

</code></pre>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># Python 3.X</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'hello world!'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>  <span class="token comment"># 注意 Python 3.X 和上面 2.X 的区别</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;input&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> string argument without an encoding

</code></pre>
</div><div class="cl-preview-section"><p><code>bytearray</code> 可以支持原地修改的相关操作，比如索引赋值、<code>append</code>、<code>pop</code>、<code>remove</code> 等。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>b<span class="token string">'hello world!'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token builtin">bytearray</span><span class="token punctuation">(</span>b<span class="token string">'hello world!'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token string">'H'</span>  <span class="token comment"># 需要 [0,255] 之间的整数进行赋值</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;input&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> <span class="token string">'bytes'</span> <span class="token builtin">object</span> cannot be interpreted <span class="token keyword">as</span> an integer
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">72</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token builtin">bytearray</span><span class="token punctuation">(</span>b<span class="token string">'Hello world!'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'W'</span><span class="token punctuation">)</span>  <span class="token comment"># 可通过 ord() 进行转换</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token builtin">bytearray</span><span class="token punctuation">(</span>b<span class="token string">'Hello World!'</span><span class="token punctuation">)</span>

</code></pre>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># bytearray 支持 append、pop、remove 等操作</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token builtin">bytearray</span><span class="token punctuation">(</span>b<span class="token string">'Hello World!!'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">33</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token builtin">bytearray</span><span class="token punctuation">(</span>b<span class="token string">'Hello World!'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token builtin">bytearray</span><span class="token punctuation">(</span>b<span class="token string">'hello world'</span><span class="token punctuation">)</span>

</code></pre>
</div><div class="cl-preview-section"><h2 id="字符串的常用方法">字符串的常用方法</h2>
</div><div class="cl-preview-section"><p>我们可以使用 <code>dir()</code> 来查看 <code>str</code> 的属性列表，使用 <code>help()</code> 来查看某个方法更多的细节。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dir</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token string">'capitalize'</span><span class="token punctuation">,</span> <span class="token string">'casefold'</span><span class="token punctuation">,</span> <span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token string">'encode'</span><span class="token punctuation">,</span> <span class="token string">'endswith'</span><span class="token punctuation">,</span> <span class="token string">'expandtabs'</span><span class="token punctuation">,</span> <span class="token string">'find'</span><span class="token punctuation">,</span> <span class="token string">'format'</span><span class="token punctuation">,</span> <span class="token string">'format_map'</span><span class="token punctuation">,</span> <span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token string">'isalnum'</span><span class="token punctuation">,</span> <span class="token string">'isalpha'</span><span class="token punctuation">,</span> <span class="token string">'isascii'</span><span class="token punctuation">,</span> <span class="token string">'isdecimal'</span><span class="token punctuation">,</span> <span class="token string">'isdigit'</span><span class="token punctuation">,</span> <span class="token string">'isidentifier'</span><span class="token punctuation">,</span> <span class="token string">'islower'</span><span class="token punctuation">,</span> <span class="token string">'isnumeric'</span><span class="token punctuation">,</span> <span class="token string">'isprintable'</span><span class="token punctuation">,</span> <span class="token string">'isspace'</span><span class="token punctuation">,</span> <span class="token string">'istitle'</span><span class="token punctuation">,</span> <span class="token string">'isupper'</span><span class="token punctuation">,</span> <span class="token string">'join'</span><span class="token punctuation">,</span> <span class="token string">'ljust'</span><span class="token punctuation">,</span> <span class="token string">'lower'</span><span class="token punctuation">,</span> <span class="token string">'lstrip'</span><span class="token punctuation">,</span> <span class="token string">'maketrans'</span><span class="token punctuation">,</span> <span class="token string">'partition'</span><span class="token punctuation">,</span> <span class="token string">'replace'</span><span class="token punctuation">,</span> <span class="token string">'rfind'</span><span class="token punctuation">,</span> <span class="token string">'rindex'</span><span class="token punctuation">,</span> <span class="token string">'rjust'</span><span class="token punctuation">,</span> <span class="token string">'rpartition'</span><span class="token punctuation">,</span> <span class="token string">'rsplit'</span><span class="token punctuation">,</span> <span class="token string">'rstrip'</span><span class="token punctuation">,</span> <span class="token string">'split'</span><span class="token punctuation">,</span> <span class="token string">'splitlines'</span><span class="token punctuation">,</span> <span class="token string">'startswith'</span><span class="token punctuation">,</span> <span class="token string">'strip'</span><span class="token punctuation">,</span> <span class="token string">'swapcase'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'translate'</span><span class="token punctuation">,</span> <span class="token string">'upper'</span><span class="token punctuation">,</span> <span class="token string">'zfill'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">help</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">.</span>isalnum<span class="token punctuation">)</span>
Help on method_descriptor<span class="token punctuation">:</span>
isalnum<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">/</span><span class="token punctuation">)</span>
    Return <span class="token boolean">True</span> <span class="token keyword">if</span> the string <span class="token keyword">is</span> an alpha<span class="token operator">-</span>numeric string<span class="token punctuation">,</span> <span class="token boolean">False</span> otherwise<span class="token punctuation">.</span>
    A string <span class="token keyword">is</span> alpha<span class="token operator">-</span>numeric <span class="token keyword">if</span> <span class="token builtin">all</span> characters <span class="token keyword">in</span> the string are alpha<span class="token operator">-</span>numeric <span class="token operator">and</span> there <span class="token keyword">is</span> at least one character <span class="token keyword">in</span> the string<span class="token punctuation">.</span>

</code></pre>
</div><div class="cl-preview-section"><p>下面我们结合代码，对 <code>str</code> 对象的一些常用方法进行简要说明。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'hello world!'</span>
<span class="token comment"># str.center(width[, fillchar])</span>
<span class="token comment"># 将原字符串置于长为 width 的字符串中间，两边空位由 fillchar 补足，默认为空格，若 width 小于字符串长度则返回原字符串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>center<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token string">'    hello world!    '</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>center<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'&gt;'</span><span class="token punctuation">)</span>
<span class="token string">'&gt;&gt;&gt;&gt;hello world!&gt;&gt;&gt;&gt;'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>center<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token string">'hello world!'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>center<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">is</span> s
<span class="token boolean">True</span>

</code></pre>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># str.count(sub[, start[, end]]) </span>
<span class="token comment"># 统计 sub 不重叠出现的次数，start 和 end 的使用方法和切片类似</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token string">'ll'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'hellllll'</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token string">'ll'</span><span class="token punctuation">)</span>
<span class="token number">3</span>

</code></pre>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># str.endswith(suffix[, start[, end]])</span>
<span class="token comment"># 是否以 suffix 结尾，suffix 可为由多个供查找的后缀构成的元组</span>
<span class="token comment"># 同理 str.startswith(prefix[, start[, end]]) 返回是否以 prefix 开始，同样 prefix 也可为一个元组</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>

</code></pre>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># str.find(sub[, start[, end]]) </span>
<span class="token comment"># 返回 sub 首次出现时（由左至右）的索引值，当不需要索引值时也可以用 in 判断成员关系</span>
<span class="token comment"># 同理 str.rfind(sub[, start[, end]]) 返回 sub 末次出现时（由左至右，同由右至左的首次出现）的索引值</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">)</span>
<span class="token number">4</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>rfind<span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">)</span>
<span class="token number">7</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'L'</span><span class="token punctuation">)</span>  <span class="token comment"># 查找的元素不存在时</span>
<span class="token operator">-</span><span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'l'</span> <span class="token keyword">in</span> s 
<span class="token boolean">True</span>

</code></pre>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># str.replace(old, new[, count]) </span>
<span class="token comment"># 将字符串中 old 替换为 new，若无 count 值，则全部替换</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">)</span>
<span class="token string">'heLLo worLd!'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'l'</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token string">'heLlo world!'</span>

</code></pre>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># str.split(sep=None, maxsplit=-1)，同理 str.rsplit(sep=None, maxsplit=-1) 从右侧开始拆分</span>
<span class="token comment"># 以 sep 为分隔符将字符串拆分为列表，maxsplit 表示最大拆分次数，默认 -1 表示不限制次数，以指定分隔符拆分空字符串则返回 ['']</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'hello,world!'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'hello,,world!'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'hello,,world!'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">',,'</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world!'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'world!'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world!'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'hello,,world!'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span> maxsplit<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">',world!'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">''</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'h'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span>
<span class="token comment"># sep 默认为 None ，此时分隔符则为连续的空格，并忽略首尾的空字符串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world!'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'  hello  world   '</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">]</span>
<span class="token comment"># 以 None 拆分空字符串、或以 None 拆分仅包含空格的字符串则返回 []</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'   '</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># str.strip([chars])</span>
<span class="token comment"># 移除字符串首尾的指定字符，省略 chars 或 chars 为 None 时则移除首尾的空格</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'  hello world  '</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'hello world'</span>
<span class="token comment"># 需要注意的是，若指定 chars 时，移除的是 chars 中的所有组合，在移除字符过程中，首部的字符在遇到第一个非 chars 中的字符时结束移除，尾部的字符移除与首部类似</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'***&gt;&gt;&gt;&gt;&gt;&gt;   hello world~*&gt;&gt;&gt;!!!!!!!'</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">'*&gt;hd! '</span><span class="token punctuation">)</span>
<span class="token string">'ello world~'</span>
<span class="token comment"># str.lstrip([chars]) 只移除首部字符；str.rstrip([chars]) 只移除尾部字符</span>

</code></pre>
</div><div class="cl-preview-section"><p>在上面我们已经使用过 <code>str.encode(encoding="utf-8", errors="strict")</code> 方法，它的作用是返回字符串编码后的字节串，这里需要说明的是其 <code>encoding</code> 默认参数为 <code>utf-8</code>，另外一个默认参数 <code>errors</code> 可以用来设置编码错误处理方案，默认为 <code>strict</code>，即编码错误时会引发 <code>UnicodeEncodeError</code>，除 <code>strict</code> 之外，还可以使用<code>ignore</code>、<code>replace</code> 等。同样，<code>bytes.decode(encoding="utf-8", errors="strict")</code> 被用于返回字节串解码后的字符串。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span>
b<span class="token string">'\xe4\xbd\xa0'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'ascii'</span><span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;input&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
UnicodeEncodeError<span class="token punctuation">:</span> <span class="token string">'ascii'</span> codec can<span class="token string">'t encode character '</span>\u4f60' <span class="token keyword">in</span> position <span class="token number">0</span><span class="token punctuation">:</span> ordinal <span class="token operator">not</span> <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'ascii'</span><span class="token punctuation">,</span> <span class="token string">'ignore'</span><span class="token punctuation">)</span>
b<span class="token string">''</span>

</code></pre>
</div><div class="cl-preview-section"><p>在 Python 2.X 中，<code>str</code> 和 <code>unicode</code> 类型同时可以支持文本字符串（当然，前者支持范围有限，即上面提到的 8 位文本字符串），所以 Python 2.X 中 <code>str</code> 和 <code>unicode</code> 之间并没有非常严格的区分。</p>
</div><div class="cl-preview-section"><p>按道理来说，我们只能在一个已编码的字节串对象上调用 <code>decode</code> 方法，在一个已解码的文本字符串对象上调用 <code>encode</code> 方法。但在 Python 2.X 中，我们仍拥有在字节串上调用 <code>encode</code> 的可能（显然这样做是不对的），这就会造成 <code>encode</code> 过程中引发 <code>UnicodeDecodeError</code> 的困惑，这是因为在你试图编码一个字节串时，Python 会隐式的先将其以默认的 <code>ascii</code> 进行解码，从而引发解码错误。在 Python 3.X 中对于文本字符串和字节串进行了严格的区分，不会再有这样困惑的场景出现。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token comment"># Python 2.X</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> u<span class="token string">'你'</span>
u<span class="token string">'\u4f60'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你'</span>
<span class="token string">'\xe4\xbd\xa0'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 隐式调用'你'.decode()，即'你'.decode().encode()</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;input&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
UnicodeDecodeError<span class="token punctuation">:</span> <span class="token string">'ascii'</span> codec can't decode byte <span class="token number">0xe4</span> <span class="token keyword">in</span> position <span class="token number">0</span><span class="token punctuation">:</span> ordinal <span class="token operator">not</span> <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'你'</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
<span class="token string">'\xe4\xbd\xa0'</span>

</code></pre>
</div><div class="cl-preview-section"><p>对于 <code>str.join(iterable)</code> 和 <code>str.format(*args, **kwargs)</code> 方法，我们将在下面讲解。</p>
</div><div class="cl-preview-section"><h2 id="为什么-.join-优于--？">为什么 <code>''.join()</code> 优于 <code>+=</code> ？</h2>
</div><div class="cl-preview-section"><h3 id="和-str.joiniterable-的基本用法"><code>+=</code> 和 <code>str.join(iterable)</code> 的基本用法</h3>
</div><div class="cl-preview-section"><p>在拼接字符串时，常用的方法有 <code>+=</code> 和 <code>str.join(iterable)</code> ，前者的使用方法非常简单：</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'hello'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">+=</span> <span class="token string">' world'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">+=</span> <span class="token string">'!'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token string">'hello world!'</span>

</code></pre>
</div><div class="cl-preview-section"><p>对于 <code>str.join(iterable)</code> ，它把可迭代对象（比如列表）中的字符串使用指定的分隔符拼接为新的字符串，这个分隔符是调用该方法的字符串 <code>str</code> 。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">' world'</span><span class="token punctuation">,</span> <span class="token string">'!'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">' world'</span><span class="token punctuation">,</span> <span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token string">'hello world!'</span><span class="token punctuation">,</span> <span class="token string">'hello world!'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 当可迭代对象中包含非字符串对象时会引发 TypeError</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;input&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> sequence item <span class="token number">0</span><span class="token punctuation">:</span> expected <span class="token builtin">str</span> instance<span class="token punctuation">,</span> <span class="token builtin">int</span> found
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">','</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token string">'1,2,3,4'</span>

</code></pre>
</div><div class="cl-preview-section"><h4 id="和-str.joiniterable-的对比"><code>+=</code> 和 <code>str.join(iterable)</code> 的对比</h4>
</div><div class="cl-preview-section"><p>在 Python 的官方文档的 Programming Recommendations 中有这样一条建议：</p>
</div><div class="cl-preview-section"><blockquote>
<p>代码的编写方式不应影响其他 Python 实现（ PyPy、Jython、IronPython、Cython、Psyco �� ）。比如，不要依赖 CPython 对 <code>a += b</code> 或 <code>a = a + b</code> 形式的原位置字符串拼接语句的优化实现。即使在 CPython 中这种优化也并不普适，并且这种优化并不存在于不使用 refcounting（引用计数） 的 Python 实现中。在代码的性能敏感部分，应使用 <code>str.join(iterable)</code> 形式，这将确保在字符串拼接以线性时间运行。</p>
</blockquote>
</div><div class="cl-preview-section"><p>并且在 Python 官方文档 Built-in Types 中也提到了：</p>
</div><div class="cl-preview-section"><blockquote>
<p>拼接不可变序列总是会生成新的对象。 这意味着通过重复拼接来构建序列的运行时开销将会基于序列总长度的乘方。</p>
</blockquote>
</div><div class="cl-preview-section"><p>我们对上面的内容进行一定的分析和说明：</p>
</div><div class="cl-preview-section"><ul>
<li>
<p>首先，在使用 <code>+=</code> 对字符串进行拼接时，由于字符串为不可变对象，不能对其进行原地的修改，所以在拼接多个字符串时， 需要分配多次内存空间。对于每个被拼接的子字符串来说，分配次数至少为一次（具体地说，比如 n 个字符串，则对于第一个子字符串来说会被重复分配 n 次，最后一个子字符串分配一次）；</p>
</li>
<li>
<p>而对于 <code>str.join(iterable)</code> ，则不需要多次分配，会对所需的内存空间计算后进行一次分配，再把每个需要拼接的子字符串依次复制，对于每个子字符串需要复制一次；</p>
</li>
<li>
<p>CPython 在内部会对 <code>+=</code> 操作在某些场景下进行实现上的优化，但这种优化并非完全可靠，同时这种优化并非具有跨解释器兼容性。鉴于以上，应尽可能使用 <code>str.join(iterable)</code> 来完成字符串拼接。</p>
</li>
</ul>
</div><div class="cl-preview-section"><p>对于这部分的实现细节感兴趣的读者可以查看源码 <a href="https://github.com/python/cpython/blob/3.8/Objects/unicodeobject.c"><code>unicodeobject.c</code></a> 中 <code>PyUnicode_Concat</code> 、<code>unicode_join</code>、<code>PyUnicode_Join</code>、<code>_PyUnicode_JoinArray</code> 等部分。</p>
</div><div class="cl-preview-section"><h2 id="字符串格式化">字符串格式化</h2>
</div><div class="cl-preview-section"><p>字符串格式化在日常开发中是一种非常常用的编码技巧，目前在 Python 中常用的字符串格式化相关方法主要包含 <code>printf</code> 风格的字符串格式化表达式、<code>str.format()</code> 字符串格式化方法调用、格式化字符串字面值 <code>f-string</code>。</p>
</div><div class="cl-preview-section"><h3 id="printf-风格"><code>printf</code> 风格</h3>
</div><div class="cl-preview-section"><p><code>printf</code> 风格的字符串格式化表达式基于 <code>format % values</code> 形式，位于 <code>format</code> 中的 <code>%</code>（转换标记符） 将会被 <code>values</code> 按照一定规则替换。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'My name is %s, I am %d years old'</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
<span class="token string">'My name is zhangsan, I am 25 years old'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'My name is %(name)s, I am %(age)d years old'</span> <span class="token operator">%</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">}</span>
<span class="token string">'My name is zhangsan, I am 25 years old'</span>

</code></pre>
</div><div class="cl-preview-section"><h4 id="str.formatargs-kwargs"><code>str.format(*args, **kwargs)</code></h4>
</div><div class="cl-preview-section"><p><code>str.format()</code> 方法是一种更符合 Python 风格的格式化方法，它基于方法调用而不是表达式，以 <code>{}</code> 代表被替换字段，未在 <code>{}</code> 内的字符会直接显示在输出中。在 <code>{}</code>（可称为替换域）中，可以为索引值、关键字、空（空代表通过相对位置进行替换）。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'My name is {}, I am {} years old'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
<span class="token string">'My name is zhangsan, I am 25 years old'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'My name is {0}, I am {1} years old'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
<span class="token string">'My name is zhangsan, I am 25 years old'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'My name is {name}, I am {age} years old'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
<span class="token string">'My name is zhangsan, I am 25 years old'</span>

</code></pre>
</div><div class="cl-preview-section"><h3 id="f-string"><code>f-string</code></h3>
</div><div class="cl-preview-section"><p><code>f-string</code> 也可称为格式化字符串字面值，它的形式基于带有前缀 <code>f</code> 或 <code>F</code> 并可包含 <code>{}</code>（代表可替换字段）的字符串。</p>
</div><div class="cl-preview-section"><pre class=" language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> name <span class="token operator">=</span> <span class="token string">'zhangsan'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> age <span class="token operator">=</span> <span class="token number">25</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token string">"My name is {name}, I am {age} years old"</span>
<span class="token string">'My name is zhangsan, I am 25 years old'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token string">"My name is {name.capitalize()}, I am {age} years old"</span>
<span class="token string">'My name is Zhangsan, I am 25 years old'</span>

</code></pre>
</div><div class="cl-preview-section"><h2 id="总结">总结</h2>
</div><div class="cl-preview-section"><p>字符串对象是 Python 对象系统中的核心内置对象，本小节我们分别从 Unicode、UTF-8、编解码、文本字符串、字节串、可变字节串、字符串格式化等多个方面对 Python 字符串相关的知识点进行了讲解。对于字符串的每一个方法，希望大家可以尽量阅读官方文档进行详细的学习和了解，这样可以更深入的了解字符串具体方法的详细用法和含义。</p>
</div>
			
		</div>
	
	
	<div class="finish-learn">
		<p class="copyright">©版权归慕课网所有，未经许可不得转载</p>
		
		
		
		<div class="ad_pic">
			<img src="https://img1.mukewang.com/5f0e5f8400011d7f06700192.jpg">
		</div>
		
		
		
		
	</div>
	<div class="comment-con">
		<h4 class="title">
			精选留言
			
				<a href="javascript: void(0);" class="add-comment js-comment-click"><i class="imwap-xieliuyan"></i><span>写留言</span></a>
			
		</h4>
		
			<ul class="comment-content">
				
				<li class="item">
					<a href="/read/commentdetail/7050">
						<img src="https://img3.mukewang.com/5333a2b70001a5a802000200-100-100.jpg" alt="" class="avatar">
						<h4 class="nickname">ID2990575</h4>
						<div class="comment-text">str.format() 和f-string有什么区别呢？在使用上有什么要注意的吗？</div>
						<div>
							
								<div class="reply">讲师回复：同学你好，相对于str.format()，f-string的主要区别（或优势）在于：
1、f-string语法更加简单，支持多行，支持插入任意的表达式；
2、通常，f-string的效率更高。
在版本满足要求（&gt;=Python3.6）的情况下，尽量使用f-string。</div>
							
						</div>
					</a>
					<p class="bottom">
						<span class="l">2020-10-25</span>
						<a href="/read/commentdetail/7050">
							<span class="icon r"><i class="imwap-comment"></i><em>1</em></span>
						</a>
						<span data-cid="7050" class="icon r js-comment-upvote "><i class="imwap-thumb_up"></i><em>1</em></span>
					</p>
				</li>
				
			</ul>
			
		
	</div>
	
	

	
		
	
	
	
		<div class="bottom-con">
			
			
				<div class="inner">
					
						<div class="price-con js-price-con">
							<span class="now">￥78.00</span>
						</div>
							
					
					
					<a class="gobuy js-gobuy" href="//m.imooc.com/account/login?backurl=//m.imooc.com/confirmorder?type=30&typeid=79">
					
						立即购买
					</a>  
				</div>
			
		</div>
	
	<div class="layer-catalog js-layer-catalog hide">
		<div class="layer-title clearfix">
			<div class="l">
				课程目录
			</div>
			
		</div>
		<div class="layer-wrap">
			<div class="js-catalog-container">
			</div>
		</div>
	</div>
	<div class="layer-comment">
		<div class="inner">
			<h5>
				<span class="btn l js-cancel-comment">取消</span>
				评论
				<span class="btn r js-send-comment">发送</span>
			</h5>
			<textarea id="comment-txt" maxlength="20000" placeholder="欢迎在这里发表留言，作者筛选后可公开显示"></textarea>
		</div>
	</div>


            </div>
        </div>
        
            
         
        
        
        
        




<script>
	// 设置字号大小及选中
	(function() {
			var fs = window.localStorage.getItem('font-size') || 'normal';
			var $c = document.querySelector('#middle>.content');
			var $points = document.querySelectorAll('.setting-box .point');
			try{
				// 抢读完了时 该元素不渲染 会有报错
				$c.className = 'content ' + fs;
				for(var i = 0; i < $points.length; i++) {
					if($points[i].className.indexOf(fs) > -1) {
						$points[i].className = $points[i].className + ' current';
					}
				}
			} catch(e) {}
			
	})();
</script>

<script type="text/javascript">
	window.onload = function() {
			zhuge.track('LearnCourse', {
					'Category': '专栏',
					'Name': '11 文本与二进制序列： 从实现细节和操作方法认识字符串对象',
					'CID': '2214',
					'Teacher': '郭元锴'
			});
	}
</script>

        
            <script type="text/javascript">
                var shareData = { 
                    title:  "11 文本与二进制序列： 从实现细节和操作方法认识字符串对象",
                    desc: "揭开被“简单易学”掩盖的Python真相",
                    imgUrl: 'https:https://img4.mukewang.com/5ee98cca00018e2a05400720.jpg',
                    otherImgUrl: 'https://img4.mukewang.com/5ee98cca00018e2a05400720.jpg',
                    text: '我正在参加@慕课网的课程，很不错哦！快来一起学习吧！',
                    // url: 'https://www.imooc.com' + window.location.pathname + window.location.search
                    url: 'https://m.imooc.com/read/79',
                    link: 'https://m.imooc.com/read/79'
                }
            </script>
            
        
        <div style="display:none;">
            <!-- 百度统计 -->
            <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?c92536284537e1806a07ef3e6873f2b3";
              var s = document.getElementsByTagName("script")[0];
              s.parentNode.insertBefore(hm, s);
            })();
            </script>

            <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
            </script>
        </div>
        
    <script type="text/javascript" src="https://m.imooc.com/static/wap/static/lib/zhugeio/init_f9752c3.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/common/js/jquery-2.1.0.min_ac9f840.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/common/js/common_84429c0.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/lib/juicer/juicer.min_8643248.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/lib/previewImage/previewImage.min_43b970d.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/common/js/msg_bed8d10.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/js/read/7.2.8/article_30e5762.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/js/course/advertisementReport_6e58a98.js"></script></body>
</html>
