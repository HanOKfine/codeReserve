<!doctype html>
<html lang="zh_CN">

    

    

    
    
    
    <head>
        
        <title>04 无规矩不成方圆：走进 PEP 8，掌握 Python 编码规范(下)</title>
        
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="揭开被“简单易学”掩盖的Python真相">
        <meta name="keywords" content="慕课网">
        <meta name="author" content="">
        <meta name = "format-detection" content="telephone=no">
        <meta http-equiv="Cache-Control" content="no-transform " />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <link rel="shortcut icon" href="https://m.imooc.com/static/wap/static/favicon.ico" />
        
        
        
        <script type="text/javascript" src="https://m.imooc.com/static/wap/static/common/js/flexible.js"></script>
        
        <script type="text/javascript">
            var userInfo = "";
            
                var isApp = 0;
            
        </script>
         
<!-- 专栏首页列表模板 -->
<script type="text/template" id="index-list-tpl">
<ul class="list-con">
    {@each data.data as item}
        <li>
            <a href="/read/${item.id}" class="item clearfix">
                <div class="img l" style="background-image: url(${item.app_pic1})">
                    {@if item.is_new }
                        <div class="icon new">
                            上新
                        </div>
                    {@else if item.is_marking} 
                        <div class="icon">
                            经典
                        </div>
                    {@/if} 
                </div>
                <div class="text-con l">
                    <div class="title">
                        ${item.title}
                    </div>
                    <div class="desc">
                        ${item.chapter_num}节 · ${item.description}
                    </div>
                     <div class="user-info">
                        ${item.nickname}
                        {@if item.author_title }
                        <span class="dot">
                            ·
                        </span>
                        ${item.author_title}
                        {@/if}
                    </div>
                    <div class="info clearfix">
                    {@if !item.isBuy } 
                        <!-- 未购买才显示 -->
                        <div class="price-con l">
                        {@if item.open_discount == "1" }
                            <span class="now">￥${item.pay_price}</span>
                            <span class="ori">￥${item.price}</span>
                            <p class="sale">${item.discount_name}</p>
                        {@else}
                            <span class="now">￥${item.price}</span>
                        {@/if}
                        </div>
                    {@/if}
                        <div class="taste-con r">
                            <span>${item.numbers}人订阅</span>
                            {@if !item.isBuy }
                                <span class="gotaste">试读</span>
                            {@else}
                                <span class="gotaste">学习</span>
                            {@/if}
                        </div>
                    </div>
                </div>
            </a>
        </li>
    {@/each}
</ul>
</script>



<!-- 专栏目录 买后目录页、 -->
<script type="text/template" id="detail-catalog-tpl">
<ul class="catalog-list">
{@each data.list as item}
    <li class="zhang">
        {@if data.structure_mode == "1" }
            <!--章节模式-->
            <div class="zhang-title">
                ${item.title}（${item.count}节）
            </div>
            <div class="zhang-sub-title">
                ${item.short_introduce}
            </div>
        {@/if}  
        <ul class="zhang-detail">
            {@each item.list as it,i}
                <li class="jie">
                    {@if data.isLogin }
                        <!-- 购买了  -->
                        {@if data.isBuy }
                        <a href="javascript:;" data-link="/read/${data.column_id}/article/${it.id}" class="js-go-read">
                        {@else}
                        <a href="javascript:;" data-link="/read/${data.column_id}/article/${it.id}" class="js-go-read" >
                        {@/if}
                    {@else}
                        <!-- 未登录  -->
                        {@if data.isApp }
                            <a href="javascript:;" onclick="window.nativeSupport.login();">
                        {@else}
                            <a href="//m.imooc.com/account/login?backurl=/read/${data.column_id}">
                        {@/if}
                    {@/if}
                        <div class="jie-con {@if data.last_chapter == it.id }recent{@/if}">
                            
                            <div class="text-con">
                                <div class="jie-title">
                                    ${it.title}
                                </div>
                                <div class="jie-status">
                                    {@if it.is_open == "0" }
                                        <span class="update-time" >${it.open_time_fmt}</span>
                                    {@/if}
                                    {@if it.view_num > 100 }
                                    <div class="learn-num">
                                        <i class="imwap-set-sns"></i>
                                        <span>${it.view_num}</span>
                                    </div>
                                    {@/if}
                                    {@if it.in_24hours == "1" }
                                        <span class="update-recent">最近更新</span>
                                    {@/if}
                                </div>
                            </div>
                        </div>
                        {@if it.is_learned }
                            <div class="jie-right haslearn is_learned js-learn" data-type="1">
                                已学
                            </div>
                        {@else}
                            <!-- 购买了  -->
                            {@if data.isBuy }
                                <div class="jie-right learn js-learn" data-type="1">
                                    学习
                                </div>
                            {@else}
                                {@if it.is_pay == "0" }
                                <!--免费小节 不占用试读次数  -->
                                    <div class="jie-right learn js-learn" data-type="1">
                                        免费
                                    </div>
                                {@else}
                                    <div class="jie-right learn js-learn" data-type="0">
                                        学习
                                    </div>
                                {@/if}
                            {@/if}
                            
                            
                        {@/if}
                    </a>
                </li>
            {@/each}
        </ul>
    </li>
{@/each}
</ul>
</script> 

<!-- 阅读页 阅读页   专栏目录  -->
<script type="text/template" id="catalog-tpl">
<div>
    <h2 class="article-title">${data.a_name}</h2>
    <ul class="catalog">
    {@each data.list as item}
        <li class="zhang">
            {@if data.structure_mode == "1" }
                <!--章节模式-->
                <div class="zhang-title">
                    ${item.title}
                    <!-- <div class="num">共${item.count}节</div> -->
                </div>
            {@/if}  
            <ul class="zhang-detail">
                {@each item.list as it,i}
                    <li class="jie">
                        <!--买了且开放的-->
                        <a href="/read/${data.column_id}/article/${it.id}">
                            <div class="jie-title clearfix full">
                                <p>
                                    {@if data.last_chapter == it.id }
                                        <span class="recent">最近阅读</span>
                                    {@/if}
                                    ${it.title}
                                </p>
                            </div>
                        </a>
                    </li>
                {@/each}
            </ul>
        </li>
    {@/each}
    </ul>
</div>
</script>





<script type="text/javascript">
	var isApp = "";
	var clientVersion = "0";
	var count_num = "2";
	var chapter_id = "2066";
	var chapter_title = "04 无规矩不成方圆：走进 PEP 8，掌握 Python 编码规范(下)";
	var aid = "79";
	var a_name = "Python 核心技术精讲";
	var a_price = "78.00";
	var a_pic = "https://img4.mukewang.com/5ee98cca00018e2a05400720.jpg";
	var userId = 0;

	var column_id = '79';
	var isLogin = 0;
	

</script>
<!-- 引入字体 -->
<script type="text/javascript" src="//cdn.webfont.youziku.com/wwwroot/js/wf/youziku.api.min.js"></script>
<script type="text/javascript">
$youziku.load(".top-con .title, .cl-preview-section h1,.cl-preview-section h2,.cl-preview-section h3,.cl-preview-section h4,.cl-preview-section h5,.cl-preview-section h6", "37af461390fa4d138f5c3d277f7286dc", "SourceHanSerifSC-Heavy"); // 思源宋体heavy
$youziku.load(".lead-motto, .cl-preview-section blockquote", "d9a0d855583142c3b2cc3bf1646a8473", "SourceHanSerifSC-Regular"); // 思源宋体regular
$youziku.load("#article_content, .cl-preview-section pre, .cl-preview-section code, #code-copy", "3d84aabcf9e44b6f8c6fa91c61fa926e", "HYQiHei-55S"); // 汉仪旗黑55s
$youziku.load(".cl-preview-section strong", "fd94fff3a17546a28913a79613bddcec", "HYQiHei-77S"); // 汉仪旗黑70s

$youziku.draw();
</script>

<style type="text/css">
  header{
    display: none!important;
  }
  
  #wrapper{
  	padding-top:0px !important;
  }
  
</style>



    <link rel="stylesheet" href="https://m.imooc.com/static/wap/static/common/css/common_d42b1ef.css" /><link rel="stylesheet" href="https://m.imooc.com/static/wap/static/css/read/7.2.8/article_2d28313.css" /></head>
    <body >
        
          
        

        
          
        

        
          







<header class="directory2">
	<div class="header clearfix">
		
			
				<div class="page-title clearfix">
					<a href="//m.imooc.com" class="imwap-icon-imooc"></a>
					<div class="page-title-name js-page-name">
						<span>专栏</span>
						<i class="imwap-arrow_d"></i>
					</div>
				</div>
			

			
			<div class="drawer-box js-drawer-more">
				<i class="imwap-more_vert"></i>
				<div class="drawer-content js-drawer-content">
					<p class="line-row"></p>
					<a class="drawer-item" href="//m.imooc.com"><i class="imwap-center"></i>回到首页</a>
					<a class="drawer-item" href="//www.imooc.com/m/web/user/usercenter.html"><i class="imwap-peaple"></i>个人中心</a>
					<a class="drawer-item" href="//m.imooc.com/feedback"><i class="imwap-comment"></i>反馈问题</a>
					
					<a class="drawer-item" href="//m.imooc.com/account/login"><i class="imwap-out"></i>注册登录</a>
					
				</div>
			</div>
			

			
				<a id="js-appload" href="Javascript:;" class="app-load"><span>下载APP</span></a>
			

		
	</div>
	
	<div class="page-tab-wrap">
		<div class="page-tab-list">
			<a href="//m.imooc.com" class="page-tab-item">首页</a>
			<a href="//m.imooc.com/course/list" class="page-tab-item">课程</a>
			<a href="//coding.m.imooc.com" class="page-tab-item">实战</a>
			<a href="//class.m.imooc.com" class="page-tab-item">金职位</a>
			<a href="//m.imooc.com/article" class="page-tab-item">手记</a>
			<a href="//m.imooc.com/read" class="page-tab-item active">专栏</a>
			<a href="//m.imooc.com/wenda" class="page-tab-item">猿问</a>
			<a href="//m.imooc.com/wiki" class="page-tab-item">慕课教程</a>
			
		</div>
	</div>
	
</header>


        

        <div id="wrapper">
            <div id="middle" class="container ">

                

                
	
		
	
	<div class="top-con">
		<p class="update-time"><span>2020-08-17&nbsp;&nbsp;&nbsp;更新</span></p>
		<div class="title">
			04 无规矩不成方圆：走进 PEP 8，掌握 Python 编码规范(下)
		</div>
	</div>
	
		<div class="article-img" style="background-image: url('https://img.mukewang.com/5ece09720001d07706400377.jpg')"></div>
	
	
		<a href="/read/79">
			<div class="course-entry">
				<img src="https://img.mukewang.com/5edcf963000148bc05200501-40-40.jpg" alt="郭元锴">
				<h3>Python 核心技术精讲</h3>
				<p>郭元锴 · BAT高级研发工程师</p>
				<i class="imwap-arrow_r"></i>
			</div>
		</a>
	
	
		<div class="lead-motto">
			<div class="content">只有在那崎岖的小路上不畏艰险奋勇攀登的人,才有希望达到光辉的顶点。<p class="author">——马克思</p></div>
		</div>
	
	
		<div class="content" id="article_content">
			
			<div class="cl-preview-section"><p>这节课，我们继续接上文对 PEP 8 规范进行解读：</p>
</div><div class="cl-preview-section"><h2 id="注释编写">注释编写</h2>
</div><div class="cl-preview-section"><p>注释对于代码的阅读、扩展以及维护都非常重要。在 Python 中常用的注释方式有三种，分别为块注释（ Block Comments ）、行内注释（ Inline Comments ）、文档字符串（ Documentation Strings ）。首先我们需要了解的是在注释编写过程中的一些通用原则，这些原则不管针对哪种注释方式，都是值得参考的。</p>
</div><div class="cl-preview-section"><ul>
<li>应注重注释的可读性和完整性，这样有助于代码后续的扩展和维护；</li>
<li>应注重注释的实时性，即代码在修改或扩展过程中，及时更新对应的注释；</li>
<li>应优先使用英文编写注释。</li>
</ul>
</div><div class="cl-preview-section"><p>以上三点从概括的角度阐述了编写注释时的一些主要思想。而在实际的编写场景中，还有一些通��的建议可以参考，比如：</p>
</div><div class="cl-preview-section"><ul>
<li>注释应为完整的句子；</li>
<li>当注释的开头不为以小写字母开始的标识符时，应大写首字母；</li>
<li>在包含多个句子的注释中，在非结尾句的结尾处可以使用两个空格等。</li>
</ul>
</div><div class="cl-preview-section"><p>更多的细节可参考 “Strunk and White” 中的写作风格（ “Strunk and White” 指的是《The Elements of Style》，为著名的美式英语写作风格指南）。下面我们便开始针对每一种注释方式分别来了解对应的一些注释编写技巧：</p>
</div><div class="cl-preview-section"><h3 id="块注释（-block-comments-）">块注释（ Block Comments ）</h3>
</div><div class="cl-preview-section"><p>块注释在代码内部比较常见，其通常由一至多个段落构成，段落之间应使用开头为 <code>#</code> 的空行隔开，每个段落由完整的句子构成，在每行以 <code>#</code> 和一个空格开始。另外，块注释和被注释代码之间应具有同级别的缩进，这样有助于区分注释和代码之间关联关系。</p>
</div><div class="cl-preview-section"><p>通常我们提到的这些细节和准则在 Python 标准库的编写中往往做的更好，我们以 Python 标准库 <code>collections</code> 中 <code>Counter</code> 对象的 <code>fromkeys</code> 方法的注释来进行示例说明，这段注释主要说明了在 <code>Counter</code> 类中没有定义 <code>fromkeys</code> 方法的原因。</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python">@<span class="token builtin">classmethod</span>
<span class="token keyword">def</span> <span class="token function">fromkeys</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> iterable<span class="token punctuation">,</span> v<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># There is no equivalent method for counters because the semantics</span>
    <span class="token comment"># would be ambiguous in cases such as Counter.fromkeys('aaabbc', v=2).</span>
    <span class="token comment"># Initializing counters to zero values isn't necessary because zero</span>
    <span class="token comment"># is already the default value for counter lookups.  Initializing</span>
    <span class="token comment"># to one is easily accomplished with Counter(set(iterable)).  For</span>
    <span class="token comment"># more exotic cases, create a dictionary first using a dictionary</span>
    <span class="token comment"># comprehension or dict.fromkeys().</span>
    <span class="token keyword">raise</span> NotImplementedError<span class="token punctuation">(</span>
        <span class="token string">'Counter.fromkeys() is undefined.  Use Counter(iterable) instead.'</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="cl-preview-section"><h3 id="行内注释（-inline-comments-）">行内注释（ Inline Comments ）</h3>
</div><div class="cl-preview-section"><p>行内注释是一种形式相对简单的注释，它和表达式或语句位于同一行，之间应通常使用两个空格隔开，注释部分应以 <code>#</code> 和一个空格开始。需要注意的一点是，在编写行内注释时，其描述要尽量明确，对于一些代码所表示的含义或逻辑显而易见时，行内注释没有必要再对其进行复述。</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token comment"># 不提倡下面的方式</span>
my_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># Make a list</span>
</code></pre>
</div><div class="cl-preview-section"><h3 id="文档字符串（-documentation-strings-）">文档字符串（ Documentation Strings ）</h3>
</div><div class="cl-preview-section"><p>在 Python 中，最重要的注释形式便是文档字符串（ Documentation Strings ），我们也常称之为 “docstrings”，一方面用来对模块、类、函数、方法等进行说明；另一方面可以配合一些辅助工具来自动化生成代码文档（关于这部分，我们会在后面的小节中专门说明）。</p>
</div><div class="cl-preview-section"><p>我们现在或许还不能完全意识到文档字符串的重要性，但如果你了解开源软件的话，你一定会知道一个开源软件文档质量的好坏有时会决定它是否会流行起来。</p>
</div><div class="cl-preview-section"><p>对于文档字符串的形式来说，它通常是模块、类、方法、函数定义中的首个语句，使用类似 <code>"""docstrings"""</code> 这样的形式。若在文档字符串中存在 <code>\</code>，可使用 <code>r"""docstrings"""</code> 形式；若在文档字符串中使用 unicode，可使用 <code>u"""docstrings"""</code> 。对于所有模块、被另外的模块导入的类或函数、类中的公共方法（包括构造函数），均应编写文档字符串。对于包来说，也可在其 <code>__init__.py</code> 中编写文档字符串。</p>
</div><div class="cl-preview-section"><p>单行文档字符串结构较为简单，在单行文档字符串后不应有空行，避免对显而易见的含义进行复述。</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">function_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token triple-quoted-string string">"""docstrings"""</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">pass</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
</code></pre>
</div><div class="cl-preview-section"><p>对于多行文档字符串来说，它的结构相对复杂，<strong>主要由引号、摘要行、空行、文档描述组成</strong>。整个文档字符串的缩进和代码首部缩进级别应相同，摘要行和首部引号可在同一行，也可在首部引号下一行，尾部引号单独成行。</p>
</div><div class="cl-preview-section"><p>对于普通类，其文档字符串可包含其实例属性、公共方法等的简要说明，在其文档字符串后可增加一个空行；对于继承于父类的子类，除了类的文档字符串中的内容外，可说明子类和父类的差异，比如对于重写父类的方法可使用 override 结合其他内容进行表示，对于调用父类方法并进行内容扩展的类方法，可使用 extend 结合其他内容进行表示；对于函数、方法，其文档字符串可包含参数、返回值说明、有可能抛出的异常以及功能等的简要说明；对于模块的文档字符串，可包含模块中可导入的类、函数等的简要说明；</p>
</div><div class="cl-preview-section"><p>对于包，其文档字符串可包含可导入的子包、模块等的简要说明（在 PEP 257 详细的描述了文档字符串的更多细节，感兴趣的同学可以查阅）。在这里我们分别以以 Python 标准库 <code>os</code> 中的一段文档字符串和第三方库 <code>Tornado</code> 中的一段文档字符串来进行示例说明：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token comment"># os</span>
<span class="token keyword">def</span> <span class="token function">makedirs</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token number">0o777</span><span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""makedirs(name [, mode=0o777][, exist_ok=False])

    Super-mkdir; create a leaf directory and all intermediate ones.  Works like
    mkdir, except that any intermediate path segment (not just the rightmost)
    will be created if it does not exist. If the target directory already
    exists, raise an OSError if exist_ok is False. Otherwise no exception is
    raised.  This is recursive.

    """</span>
    <span class="token keyword">pass</span>
</code></pre>
</div><div class="cl-preview-section"><p>在 Tornado 的文档字符串中，我们可以看到反引号 ``…`` 这样的写法（以及在我们没有列举的一些文档字符串中也有双星号 **…**、 星号 *…* 写法），这种写法和 <code>reStructuredText</code> 标记语言有关，在开源软件的文档编写中非常常用，在后面 <code>sphinx</code> 相关的小节中，我们再来详细说明。</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token comment"># Tornado</span>
<span class="token keyword">def</span> <span class="token function">import_object</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Any<span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Imports an object by name.

    ``import_object('x')`` is equivalent to ``import x``.
    ``import_object('x.y.z')`` is equivalent to ``from x.y import z``.

    &gt;&gt;&gt; import tornado.escape
    &gt;&gt;&gt; import_object('tornado.escape') is tornado.escape
    True
    &gt;&gt;&gt; import_object('tornado.escape.utf8') is tornado.escape.utf8
    True
    &gt;&gt;&gt; import_object('tornado') is tornado
    True
    &gt;&gt;&gt; import_object('tornado.missing_module')
    Traceback (most recent call last):
        ...
    ImportError: No module named missing_module
    """</span>
    <span class="token keyword">if</span> name<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">__import__</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>

    parts <span class="token operator">=</span> name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span>
    obj <span class="token operator">=</span> <span class="token builtin">__import__</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fromlist<span class="token operator">=</span><span class="token punctuation">[</span>parts<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> parts<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> AttributeError<span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ImportError<span class="token punctuation">(</span><span class="token string">"No module named %s"</span> <span class="token operator">%</span> parts<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="cl-preview-section"><p>在 PyCharm 中我们很方便的编写函数或方法的文档字符串，比如我们编写了这种形式的函数后：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">function_name</span><span class="token punctuation">(</span>var_one<span class="token punctuation">,</span> var_two<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token string">""</span><span class="token string">""</span><span class="token string">""</span>
    <span class="token keyword">pass</span>
</code></pre>
</div><div class="cl-preview-section"><p>只需要在引号中间回车，PyCharm 会帮助我们生成一个标准的结构，其包含必要的信息：</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">function_name</span><span class="token punctuation">(</span>var_one<span class="token punctuation">,</span> var_two<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    
    :param var_one: 
    :param var_two: 
    :return: 
    """</span>
    <span class="token keyword">pass</span>
</code></pre>
</div><div class="cl-preview-section"><p>另外，文档字符串可通过对象的 <code>__doc__</code> 属性查看，同时也可借助 Python 的内置函数 <code>help()</code> 来查看。同时，编写良好的文档字符串还可以结合自动化工具帮助我们生成代码文档，比如 Python 自带的 <code>pydoc</code> 命令，上面提到的第三方工具 <code>sphinx</code> 等。</p>
</div><div class="cl-preview-section"><pre class="  language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">function_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token triple-quoted-string string">"""docstrings"""</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">pass</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> function_name<span class="token punctuation">.</span>__doc__
<span class="token string">'docstrings'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">help</span><span class="token punctuation">(</span>function_name<span class="token punctuation">)</span>
Help on function function_name <span class="token keyword">in</span> module __main__<span class="token punctuation">:</span>

function_name<span class="token punctuation">(</span><span class="token punctuation">)</span>
    docstrings
</code></pre>
</div><div class="cl-preview-section"><h2 id="命名规范">命名规范</h2>
</div><div class="cl-preview-section"><p>命名规范在代码的设计中是一个相当具有扩展性的话题，我们在这里会了解到其中主要的命名规则和 Python 中针对不同元素的常用命名方式。在这些基本的准则基础上，后续我们仍需要对一些高质量开源代码进行阅读，因为编写这些代码的业内大拿们往往在命名背后都有一套能够支撑其选择该命名的理论，在这个过程中我们会不断积累经验，���步的理解在代码中如何进行一个好的命名。</p>
</div><div class="cl-preview-section"><h3 id="常见的命名规则">常见的命名规则</h3>
</div><div class="cl-preview-section"><ul>
<li><strong>匈牙利命名法</strong>：以一至多个小写字母表示其属性、类型，后接首字母大写的一至多个单词表示其作用描述。比如 <code>m_bCanRun</code>，其中 <code>m_</code> 表示其为成员变量，<code>b</code> 表示其类型为布尔值，<code>CanRun</code> 表示其代表是否可以检查的含义。</li>
<li><strong>驼峰命名法</strong>：以一至多个逻辑单元构成，每个逻辑单元可称为一个识别字，首个识别字首字母小写，其余识别字首字母大写，比如 <code>canRun</code>，由于首字母小写，这种形式也被称为小驼峰命名法。</li>
<li><strong>帕斯卡命名法</strong>：和驼峰命名法类似，区别为首字母大写，如 <code>CanRun</code>，也被称为大驼峰命名法。</li>
<li><strong>下划线命名法</strong>：和驼峰命名法类似，区别为所有识别字均小写，识别字之间使用 <code>_</code> 连接，比如 <code>can_run</code>。</li>
</ul>
</div><div class="cl-preview-section"><p>除此之外，还有其他形式的命名规则，比如大写 <code>CANRUN</code>、大写结合下划线  <code>CAN_RUN</code>、小写 <code>canrun</code> 等。另外在 Python 中也有前缀或者后缀（ leading or tailing ）下划线、双下划线等命名方式，在 Linux 代码中也存在对于一组相关方法使用相同的前缀的形式命名形式，比如 <code>c_run</code>、<code>c_stop</code> 等。</p>
</div><div class="cl-preview-section"><h3 id="python-常用的命名方式">Python 常用的命名方式</h3>
</div><div class="cl-preview-section"><p><strong>通用准则</strong>：</p>
</div><div class="cl-preview-section"><ul>
<li>无论你编写的模块、类、还是函数，其中对外暴露出的公共使用部分的命名应从使用场景出发。比如 <code>os</code> 模块中 <code>makedirs</code>、<code>removedirs</code> 等函数的命名，我们可以清楚的知道这些函数的使用场景，而不用关心其内部实现；</li>
<li>尽量使用完整的、准确的、易于理解的、具有明确目的的单词来命名，或者使用下划线将可以表达完整含义的单词（或缩写，但缩写往往会造成不明确）进行连接（哪怕这样会很长，Explicit is better than implicit ）；</li>
<li>避免使用容易混淆的字符，比如  l（ L 的小写）、O（ o 的大写）等；</li>
<li>避免采用内置名称、关键字和已经使用过的名称，避免采用过于通用的名称，前者会造成原有功能的屏蔽，后者会造成含义过于广泛而失去明确性；</li>
<li>与此同时，还有观点表示应避免使用 <code>tools</code>、<code>utils</code>、<code>common</code> 等名称，以及避免使用以 <code>object</code> 、<code>manager</code> / <code>management</code> 、<code>handler</code> 等作为后缀的名称，这些观点中将其称之为反模式，认为这些名称没有起到实际的意义，并且类似 <code>utils</code> 的命名反而最终会成为劣质代码的聚集地，并且将这种名称认为是缺乏设计的名称，我们在这里将这些观点当作一种扩展阅读即可；</li>
</ul>
</div><div class="cl-preview-section"><p><strong>对于变量（和常量）</strong>：</p>
</div><div class="cl-preview-section"><ul>
<li>变量名可小写，也可使用下划线命名；</li>
<li>类型变量名（常用于类型提示）应使用大驼峰命名（关于类型提示，后面的课程中会详细讲解）；</li>
<li>常量应使用全大写字母，必要时使用下划线分隔，并且要注意在 Python 中并没有类似其他语言中 <code>const</code> 的概念，常量仅仅是一种约定（常量通常放置在代码顶部、或单独的模块、或特定的配置文件中）。对于一组常量，不应使用同一个前缀（这也适用于在同一个类中的方法或者属性），因为这样会和模块名称造成冗余，若多组常量，则针对每一组常量可以使用同一前缀。</li>
<li>对于容器类变量，常采用复数名词形式；对于映射类变量，常采用 <code>key_value</code> 的形式，其中 <code>key</code>、<code>value</code> 为键和值的实际含义。</li>
<li>对于表示布尔值的变量或者常量（但不仅限于这两者），常采用 <code>has</code>、<code>is</code> 作为前缀。</li>
</ul>
</div><div class="cl-preview-section"><p><strong>对于类（和异常）</strong>：</p>
</div><div class="cl-preview-section"><ul>
<li>类名应使用大驼峰命名（这里不包括一些 Python 内置的类，比如 <code>int</code>、<code>list</code> ），类和属性常采用名词，方法多采用动词或者包含动词。</li>
<li>基类常采用 <code>Base</code> 作为前缀，抽象类常采用 <code>Abstract</code> 作为前缀。</li>
<li>异常名应使用大驼峰命名法，当此异常表示一个错误时，应添加 <code>Error</code> 后缀（并不是所有异常都代表代码运行错误，比如 <code>KeyboardInterrupt</code>、<code>SystemExit</code> ）。</li>
</ul>
</div><div class="cl-preview-section"><p><strong>对于函数、方法</strong>：</p>
</div><div class="cl-preview-section"><ul>
<li>函数名、方法名应使用小写，也可使用下划线命名（但我们仍会在一些代码中看到一些方法或者函数名称采用了驼峰命名法，甚至在 Python 的标准库中也存在这样的现象，比如在 <code>threading</code> 模块中，因为这些代码的出现往往早于 PEP 8 规范的诞生，同时为了向后兼容而保留，但通常这些模块都会提供相同功能的以小写加下划线命名的方法，我们应该尽可能使用这些新的方法）。</li>
<li>实例方法的首个参数名应为 <code>self</code> ，类方法的首个参数应为 <code>cls</code>（ <code>class</code> 作为关键字不能被使用，常被 <code>cls</code> 或 <code>klass</code> 替换）；</li>
</ul>
</div><div class="cl-preview-section"><p><strong>对于模块和包</strong>：</p>
</div><div class="cl-preview-section"><ul>
<li>模块（ modules ）名应尽可能使用小写，在必要时可以使用下划线命名（除了 <code>__init__</code> 模块以外），当使用 C/C++ 编写扩展模块时，通常需要添加下划线前缀；</li>
<li>包（ packages ）名应使用小写，最好不要使用下划线；</li>
</ul>
</div><div class="cl-preview-section"><p><strong>特殊格式</strong>：</p>
</div><div class="cl-preview-section"><ul>
<li>
<p>单下划线前缀，比如 <code>_name</code> ，常称为 ”伪私有属性“（也可用于私有的方法、类等），这种命名方式在 Python 中是一种表示私有属性的约定（同时注意 <code>from ... import *</code> 时不会导入这种形式的对象，并且这种伪私有变量通常会通过特定的方法来获取或者赋值），私有属性通常没有直接对外的功能，常用于记录内部状态或用于提供一些公共功能的方法内使用；</p>
</li>
<li>
<p>单下划线后缀，比如 <code>name_</code> ，常用于避免和 Python 的关键字发生冲突；</p>
</li>
<li>
<p>双下划线前缀，比如 <code>__name</code> ，常用于基类避免和子类中的命名冲突，Python 会通过转换规则将其转换为类似 <code>_Class__name</code> 的形式，这种方式通常称为命名修饰 name mangling 或 name decoration（这种方式通常用于多继承，应避免将这种形式用在私有属性的命名上）；</p>
<pre class="  language-python"><code class="prism  language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     __name <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> MyClass<span class="token punctuation">.</span>__name  <span class="token comment"># 无法直接访问</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"&lt;input&gt;"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
AttributeError<span class="token punctuation">:</span> <span class="token builtin">type</span> <span class="token builtin">object</span> <span class="token string">'MyClass'</span> has no attribute <span class="token string">'__name'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> MyClass<span class="token punctuation">.</span>_MyClass__name
<span class="token number">1</span>
</code></pre>
</li>
<li>
<p>前后双下划线，比如 <code>__name__</code> ，这是我们之前提到过的 Python 内部常用的 dunder 名称，不应自定义这类命名。</p>
</li>
</ul>
</div><div class="cl-preview-section"><h2 id="代码检查与格式化工具">代码检查与格式化工具</h2>
</div><div class="cl-preview-section"><h3 id="pycharm-默认的检查和格式化工具">PyCharm 默认的检查和格式化工具</h3>
</div><div class="cl-preview-section"><p>PyCharm 中已经内置了 <code>pycodestyle.py</code> 进行检查，在 PyCharm 右下角或在 Settings 中搜索 Inspections ：</p>
</div><div class="cl-preview-section"><p><img src="https://img.mukewang.com/5ece0c1c0001c3e704150220.png" alt="图片描述"></p>
</div><div class="cl-preview-section"><p>当然，你也可以在选择忽略某些检查提示，在 Ignore errors 中添加或者在 IDE 中检查提示浮窗中选择 More actions…，点击 Ignore errors like this。</p>
</div><div class="cl-preview-section"><p><img src="https://img.mukewang.com/5ece0c240001a39b07320638.png" alt="图片描述"></p>
</div><div class="cl-preview-section"><h3 id="代码检查工具-pylint">代码检查工具 Pylint</h3>
</div><div class="cl-preview-section"><p>pylint 是一款代码检查与分析工具（类似的可以进行静态检查的工具还有 flake8 等），它不仅可以对代码中违反 PEP 8 的部分进行检查，还可以对代码中常见的错误进行静态分析。同时，pylint 可以很方便的集成进 PyCharm 中。</p>
</div><div class="cl-preview-section"><h3 id="代码格式化工具-black">代码格式化工具 Black</h3>
</div><div class="cl-preview-section"><p>black 是一款相对较新的代码格式化工具（类似的格式化工具还有 autopep8、yapf 等），配置项少是它最大的特点，这通常对于刚开始学习 Python 编码规范的读者来说是一件好事，不必关注太多细节便可以写出相对规范的 Python 代码。</p>
</div><div class="cl-preview-section"><h3 id="与-pep-8-结合形成团队规范">与 PEP 8 结合形成团队规范</h3>
</div><div class="cl-preview-section"><p>在一个软件团队中，编码规范的一致性是非常重要的，一个团队中的所有成员都需要共同遵守该规范。对于这个规范，通常有两个原则，首先是团队内部一致，其次是在条件允许的范围内尽可能和 PEP 8 一致。那我们应该如何根据项目的实际情况来和 PEP 8 结合形成团队的代码基本规范呢？</p>
</div><div class="cl-preview-section"><h4 id="项目初期">项目初期</h4>
</div><div class="cl-preview-section"><p>如果在项目初期，完全遵守 PEP 8 或者对其做一些结合团队内部实际情况的小幅度调整（比如适当拓宽行最大长度等）即可，这样不仅有利于提高团队内部编码规范的一致性，有助于团队内部的协作，提高代码本身的可读性，也降低了未来和开源社区接轨的难度。</p>
</div><div class="cl-preview-section"><h4 id="项目成熟">项目成熟</h4>
</div><div class="cl-preview-section"><p>如果项目已经基本成熟，并且在项目初期没有遵循 PEP 8 指南，一种做法和上面提到的情况相同，完全遵守 PEP 8 的规范或者做小幅度调整，那么这样意味着需要全盘按照 PEP 8 规范进行改造，这种方式所带来的工作量会相当巨大（哪怕是借助一些成熟的工具）。</p>
</div><div class="cl-preview-section"><p>因为这种调整往往会伴随着其他功能的开发，可能会涉及到大量版本管理相关的分支冲突，尤其是在较复杂的大型项目中。在这种情况下，有两种解决方式：</p>
</div><div class="cl-preview-section"><ul>
<li>在每个独立的功能开发或者问题修复中进行规范的调整，可以在一次提交中仅修改一个独立代码功能块的编码风格或者在完成其他必要工作的过程中顺带进行该部分的编码规范调整，这样来将成本和影响降到最低。</li>
<li>另外一种做法是将原有规范和 PEP8 结合，即保留原有规范，剩余部分均采用 PEP8 规范，对所有以前和未来的代码均采用这一种定制化的规范，这种做法的好处便是项目中只存在一种规范，但缺点便是和 PEP8 产生了一定分歧。还有一种比较常见的方式便是在代码核心部分不做修改，依然采取项目之前的规范，在其他部分中遵循 PEP8 规范，那么这也意味着在项目会存在两种规范。</li>
</ul>
</div><div class="cl-preview-section"><h4 id="项目发布">项目发布</h4>
</div><div class="cl-preview-section"><p>如果你的项目已经作为框架或者公共组件发布，除了以上两点之外，你还需要考虑向后兼容，这时可以参考我们上面提到的类似 <code>threading</code> 模块的做法。</p>
</div><div class="cl-preview-section"><h2 id="总结">总结</h2>
</div><div class="cl-preview-section"><p>本小节中，我们对 Python 编码规范进行了较为详细的讲解，从多个方面入手着重讲解了 PEP 8 的核心内容。同时在编码规范的基础上，我们还对一些流行度较高的工具进行了介绍，它们的安装使用都非常方便，希望大家可以在之后多尝试。作为一个软件工程师，写出一手规范、标准的代码，都是对自己、对协作者最大的负责。希望大家不仅可以理解并掌握 PEP 8，而且还能将其用以指导自己进行编码实践，不断提高编码的规范性。</p>
</div>
			
		</div>
	
	
	<div class="finish-learn">
		<p class="copyright">©版权归慕课网所有，未经许可不得转载</p>
		
		
		
		<div class="ad_pic">
			<img src="https://img4.mukewang.com/5ece097800011d7f06700192.jpg">
		</div>
		
		
		
		
	</div>
	<div class="comment-con">
		<h4 class="title">
			精选留言
			
				<a href="javascript: void(0);" class="add-comment js-comment-click"><i class="imwap-xieliuyan"></i><span>写留言</span></a>
			
		</h4>
		
			<ul class="comment-content">
				
				<li class="item">
					<a href="/read/commentdetail/6403">
						<img src="https://img2.mukewang.com/545847f50001126402200220-100-100.jpg" alt="" class="avatar">
						<h4 class="nickname">fdffddfd</h4>
						<div class="comment-text">作者有没有博客？</div>
						<div>
							
								<div class="reply">讲师回复：你好，目前暂无对外的技术博客，后面会在慕课的手记中同步一些软件技术与项目的心得体会与其他动态，感谢关注！</div>
							
						</div>
					</a>
					<p class="bottom">
						<span class="l">2020-08-03</span>
						<a href="/read/commentdetail/6403">
							<span class="icon r"><i class="imwap-comment"></i><em>1</em></span>
						</a>
						<span data-cid="6403" class="icon r js-comment-upvote "><i class="imwap-thumb_up"></i><em>1</em></span>
					</p>
				</li>
				
				<li class="item">
					<a href="/read/commentdetail/6105">
						<img src="https://img4.mukewang.com/5b8ce3e50001559a02000200-100-100.jpg" alt="" class="avatar">
						<h4 class="nickname">慕仰7184539</h4>
						<div class="comment-text">真的是太受用了，给作者点赞，目前看到过最好的 Python 中文进阶资料，没有之一，这一个小节估计很多入门用户体会都不会很深，但如果看了一些开源库或者写了一些企业级项目之后再看，这个小节中所说的真的是到位，总结性非常强，受益无穷</div>
						<div>
							
								<div class="reply">讲师回复：感谢认可</div>
							
						</div>
					</a>
					<p class="bottom">
						<span class="l">2020-07-11</span>
						<a href="/read/commentdetail/6105">
							<span class="icon r"><i class="imwap-comment"></i><em>1</em></span>
						</a>
						<span data-cid="6105" class="icon r js-comment-upvote "><i class="imwap-thumb_up"></i><em>3</em></span>
					</p>
				</li>
				
			</ul>
			
		
	</div>
	
	

	
		
	
	
	
		<div class="bottom-con">
			
			
				<div class="inner">
					
						<div class="price-con js-price-con">
							<span class="now">￥78.00</span>
						</div>
							
					
					
					<a class="gobuy js-gobuy" href="//m.imooc.com/account/login?backurl=//m.imooc.com/confirmorder?type=30&typeid=79">
					
						立即购买
					</a>  
				</div>
			
		</div>
	
	<div class="layer-catalog js-layer-catalog hide">
		<div class="layer-title clearfix">
			<div class="l">
				课程目录
			</div>
			
		</div>
		<div class="layer-wrap">
			<div class="js-catalog-container">
			</div>
		</div>
	</div>
	<div class="layer-comment">
		<div class="inner">
			<h5>
				<span class="btn l js-cancel-comment">取消</span>
				评论
				<span class="btn r js-send-comment">发送</span>
			</h5>
			<textarea id="comment-txt" maxlength="20000" placeholder="欢迎在这里发表留言，作者筛选后可公开显示"></textarea>
		</div>
	</div>


            </div>
        </div>
        
            
         
        
        
        
        




<script>
	// 设置字号大小及选中
	(function() {
			var fs = window.localStorage.getItem('font-size') || 'normal';
			var $c = document.querySelector('#middle>.content');
			var $points = document.querySelectorAll('.setting-box .point');
			try{
				// 抢读完了时 该元素不渲染 会有报错
				$c.className = 'content ' + fs;
				for(var i = 0; i < $points.length; i++) {
					if($points[i].className.indexOf(fs) > -1) {
						$points[i].className = $points[i].className + ' current';
					}
				}
			} catch(e) {}
			
	})();
</script>

<script type="text/javascript">
	window.onload = function() {
			zhuge.track('LearnCourse', {
					'Category': '专栏',
					'Name': '04 无规矩不成方圆：走进 PEP 8，掌握 Python 编码规范(下)',
					'CID': '2066',
					'Teacher': '郭元锴'
			});
	}
</script>

        
            <script type="text/javascript">
                var shareData = { 
                    title:  "04 无规矩不成方圆：走进 PEP 8，掌握 Python 编码规范(下)",
                    desc: "揭开被“简单易学”掩盖的Python真相",
                    imgUrl: 'https:https://img4.mukewang.com/5ee98cca00018e2a05400720.jpg',
                    otherImgUrl: 'https://img4.mukewang.com/5ee98cca00018e2a05400720.jpg',
                    text: '我正在参加@慕课网的课程，很不错哦！快来一起学习吧！',
                    // url: 'https://www.imooc.com' + window.location.pathname + window.location.search
                    url: 'https://m.imooc.com/read/79',
                    link: 'https://m.imooc.com/read/79'
                }
            </script>
            
        
        <div style="display:none;">
            <!-- 百度统计 -->
            <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?c92536284537e1806a07ef3e6873f2b3";
              var s = document.getElementsByTagName("script")[0];
              s.parentNode.insertBefore(hm, s);
            })();
            </script>

            <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
            </script>
        </div>
        
    <script type="text/javascript" src="https://m.imooc.com/static/wap/static/lib/zhugeio/init_f9752c3.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/common/js/jquery-2.1.0.min_ac9f840.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/common/js/common_84429c0.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/lib/juicer/juicer.min_8643248.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/lib/previewImage/previewImage.min_43b970d.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/common/js/msg_bed8d10.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/js/read/7.2.8/article_30e5762.js"></script><script type="text/javascript" src="https://m.imooc.com/static/wap/static/js/course/advertisementReport_6e58a98.js"></script></body>
</html>
